<div class="usuario-container">
  <div class="header">
    <h1>Gestión de Usuarios</h1>
    <button nz-button nzType="primary" (click)="showModal()">
      <span nz-icon nzType="plus"></span>
      Nuevo Usuario
    </button>
  </div>

  <nz-table 
    #usuariosTable 
    [nzData]="usuarios" 
    [nzLoading]="loading"
    nzBordered
    nzSize="middle">
    <thead>
      <tr>
        <th nzWidth="35%">Nombre</th>
        <th nzWidth="25%">Cargo</th>
        <th nzWidth="20%">Teléfono</th>
        <th nzWidth="20%" nzAlign="center">Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let usuario of usuariosTable.data">
        <td>
          <strong style="color: #e2e8f0; font-size: 15px;">{{ usuario.name }}</strong>
        </td>
        <td>
          <span style="
            background: #1e40af;
            color: #ffffff;
            padding: 4px 12px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
          ">{{ usuario.cargo }}</span>
        </td>
        <td>
          <span style="color: #94a3b8;">
            <span nz-icon nzType="phone" style="margin-right: 6px;"></span>
            {{ usuario.telefono }}
          </span>
        </td>
        <td nzAlign="center">
          <button 
            nz-button 
            nzType="default" 
            nzSize="small"
            (click)="showModal(usuario)"
            style="margin-right: 8px;"
            title="Editar usuario">
            <span nz-icon nzType="edit"></span>
          </button>
          <button 
            nz-button 
            nzType="primary" 
            nzDanger
            nzSize="small"
            nz-popconfirm
            nzPopconfirmTitle="¿Está seguro de eliminar este usuario?"
            nzPopconfirmPlacement="topRight"
            (nzOnConfirm)="deleteUsuario(usuario.id!)"
            title="Eliminar usuario">
            <span nz-icon nzType="delete"></span>
          </button>
        </td>
      </tr>
    </tbody>
  </nz-table>

  <nz-modal
    [(nzVisible)]="isModalVisible"
    [nzTitle]="isEditMode ? 'Editar Usuario' : 'Nuevo Usuario'"
    (nzOnCancel)="handleCancel()"
    (nzOnOk)="handleOk()"
    nzWidth="500px">
    <ng-container *nzModalContent>
      <form nz-form nzLayout="vertical">
        <nz-form-item>
          <nz-form-label nzRequired>Nombre Completo</nz-form-label>
          <nz-form-control>
            <input 
              nz-input 
              [(ngModel)]="currentUsuario.name" 
              name="name"
              placeholder="Ej: Juan Pérez" />
          </nz-form-control>
        </nz-form-item>

        <nz-form-item>
          <nz-form-label nzRequired>Cargo</nz-form-label>
          <nz-form-control>
            <input 
              nz-input 
              [(ngModel)]="currentUsuario.cargo" 
              name="cargo"
              placeholder="Ej: Desarrollador Senior" />
          </nz-form-control>
        </nz-form-item>

        <nz-form-item>
          <nz-form-label nzRequired>Teléfono</nz-form-label>
          <nz-form-control>
            <input 
              nz-input 
              [(ngModel)]="currentUsuario.telefono" 
              name="telefono"
              placeholder="Ej: +57 300 123 4567" />
          </nz-form-control>
        </nz-form-item>
      </form>
    </ng-container>
  </nz-modal>
</div>
